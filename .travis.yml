language: go
go:
  - 1.13.x

before_script:
  - cd /tmp && mkdir tools && cd -
  - sudo curl -s -L "https://github.com/sonatype-nexus-community/nancy/releases/download/v0.0.36/nancy-linux.amd64-v0.0.36" -o "/tmp/tools/nancy"
  - sudo chmod +x /tmp/tools/nancy
  - export PATH=$PATH:/tmp/tools/

jobs:
  include:
    - stage: "Examples"
      script: nancy Gopkg.lock
      name: "Using dep"
    - script: go list -m all | nancy
      name: "Using gomod"

env:
  - GO111MODULE=on